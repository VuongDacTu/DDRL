@using PJ_DGRL.Models.DGRLModels
@model IEnumerable<PJ_DGRL.Models.DGRLModels.Student>
<form asp-action="Index" method="get">
    <input type="text" name="name" placeholder="Nhập tên sinh viên">
    <button type="submit">Tìm kiếm</button>
</form>
<hr />
@if (Model.FirstOrDefault() != null)
{
    <table class="table">
        <tbody class="table-group-divider">

            @foreach (var item in Model)
            {
                <tr>
                    @{
                        int classPoint = item.SumaryOfPoints.FirstOrDefault()?.ClassPoint ?? 0;
                        int selfPoint = item.SumaryOfPoints.FirstOrDefault()?.SelfPoint ?? 0;
                    }
                    <td><b><a asp-controller="History" asp-action="Class" asp-route-studentId ="@item.Id"> @item.FullName</a></b></td>
                    <td><p>(@item.Id)</p></td>
                    <td><p>@selfPoint điểm</p></td>
                    
                    @if (classPoint != 0)
                    {
                        <td><p>@classPoint điểm</p></td>
                    }
                    else
                    {
                        <td><p class="text-danger">Chưa đánh giá</p></td>
                    }
                    @if (item.IsActive == 1)
                    {
                        <td> <a class="nav-link text-dark btn btn-outline-warning" asp-area="Student" asp-controller="LT_DGRL" asp-action="Index" asp-route-studentId="@item.Id">Đánh giá</a></td>
                    }
                    else
                    {
                        <p class="text-danger">Không thể đánh giá do sinh viên đã nghỉ học hoặc bảo lưu</p>
                    }
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <div class="alert alert-danger">
        <h5>Không tìm thấy sinh viên nào !!!</h5>
    </div>
}
